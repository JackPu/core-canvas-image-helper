var daycaca=function(t){function e(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=function(t){return"number"==typeof t},o=/[.\/](png|jpeg|jpg|gif|bmp)/,s={ratio:1,compress:80,enableWebWorker:!1};t.exports={setConfig:function(t){this._config=i(s,t)},init:function(t,e){var r=this,a=t.split(";"),i=null,n=this._createImage(t);a.length>1&&(i=a[0].replace("data:","")),n.onload=function(){var t=r._getCanvas(n.naturalWidth,n.naturalHeight);t.getContext("2d").drawImage(n,0,0);var a=t.toDataURL(i);e(a)}},base64:function(t,e){var r=this._getSrc(t),a=r.src,i=r.type;if("file"===i)return this._readFile(a,e);if("video"===i){var n=t,o=this._getCanvas(n.videoWidth,n.videoHeight);o.getContext("2d").drawImage(n,0,0);e(o.toDataURL(),o)}return this.init(a,e)},compress:function(t,e,r){var a=this,i=this._getSrc(t),n=i.src;if("file"===i.type)return this._readFile(n,function(i){a._compress(i,t,e,r)});this._compress(n,t,e,r)},_compress:function(t,e,r,a){var i=this;this._loadImage(t,function(t){var n=i._getImageType(e),o=i._getCanvas(t.naturalWidth,t.naturalHeight);o.getContext("2d").drawImage(t,0,0);var s=o.toDataURL(n,r/100);a(s)})},crop:function(t,e,r){var a=this,i=this._getSrc(t),n=i.src;if("file"===i.type)return this._readFile(n,function(i){a._crop(i,t,e,r)});this._crop(n,t,e,r)},_crop:function(t,e,r,a){var i=this;this._loadImage(t,function(t){if(n(r.x)&&n(r.y)&&r.w>0&&r.h>0){var o=r.w,s=r.h;r.maxWidth&&r.maxWidth<o&&(o=r.maxWidth,s=r.h*o/r.w),r.maxHeight&&r.maxHeight<s&&(s=r.maxHeight),r.fixedWidth&&r.fixedHeight&&(o=r.fixedWidth,s=r.fixedHeight);var c=i._getCanvas(o,s);c.getContext("2d").drawImage(t,r.x,r.y,r.w,r.h,0,0,o,s);var u=i._getImageType(e),f=c.toDataURL(u,r.compress/100);a(f)}})},resize:function(t,e,r){var i=this,n=this._getSrc(t),o=n.src,c=n.type,u={};if("number"!=typeof e&&"string"!=typeof e||(u={ratio:e,compress:s.compress}),"object"===(void 0===e?"undefined":a(e))&&(u=e),"file"===c)return this._readFile(o,function(e){i._resize(e,t,u,r)});this._resize(o,t,u,r)},_resize:function(t,e,r,a){var i=this;this._loadImage(t,function(t){var n=t.naturalWidth,o=t.naturalHeight;r.ratio>0?(n=Math.floor(t.naturalWidth*r.ratio),o=Math.floor(t.naturalHeight*r.ratio)):"number"==typeof r.width&&"number"==typeof r.height&&(n=Math.floor(r.width),o=Math.floor(r.height));var s=i._getCanvas(n,o);s.getContext("2d").drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,n,o);var c=i._getImageType(e),u=s.toDataURL(c,r.compress/100);a(u)})},rotate:function(t,e,r){var a=this,i=this._getSrc(t),n=i.src;return"file"===i.type?this._readFile(n,function(){a._rotate(n,t,e,r)}):e%360==0?r(n):void this._rotate(n,t,e,r)},_rotate:function(t,e,r,a){var i=this;this._loadImage(t,function(t){var n=t.naturalWidth,o=t.naturalHeight;90!==(r%=360)&&270!==r||(n=t.naturalHeight,o=t.naturalWidth);var s=i._getCanvas(n,o),c=s.getContext("2d");c.clearRect(0,0,n,o),c.fillStyle="white",c.fillRect(0,0,n,o),c.translate(n/2,o/2),c.rotate(r*Math.PI/180),c.drawImage(t,-t.naturalWidth/2,-t.naturalHeight/2);var u=i._getImageType(e),f=s.toDataURL(u,1);a(f,n,o),s=null,c=null})},_loadImage:function(t,e){var r=this._createImage(t);r.onload=function(){e(r)}},_readFile:function(t,e){var r=new FileReader;r.onload=function(t){var r=t.target.result;e(r)},r.readAsDataURL(t)},_getCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},_createImage:function(t){var e=new Image;return e.src=t,e},_getSrc:function(t){var e=t,r="url";if(this._isImageElement(t)){var a=t.src;if(!a)throw new Error("Element must hava src");e=a,r="element"}else this._isVideoElement(t)?(e=t,r="video"):this._isFileObject(t)&&(e=t,r="file");return{src:e,type:r}},_isFileObject:function(t){return"object"===(void 0===t?"undefined":a(t))&&t.type&&t.size>0},_isImageElement:function(t){return"object"===(void 0===t?"undefined":a(t))&&"IMG"===t.tagName},_isVideoElement:function(t){return"object"===(void 0===t?"undefined":a(t))&&"VIDEO"===t.tagName},_getImageType:function(t){var e=this._getSrc(t),r=e.src,a=e.type,i="image/jpeg";if("file"===a){var n=t.type,s=n.match(/(image\/[\w]+)\.*/)[0];void 0!==s&&(i=s)}else{var c=o.exec(r);c&&c[1]&&(i="image/"+c[1])}return i}}}]);