var daycaca=function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=function(t){return"number"==typeof t},o=/\.(png|jpeg|jpg|gif|bmp)/,s={ratio:1,enableWebWorker:!1};t.exports={setConfig:function(t){this._config=a(s,t)},init:function(t,e){var r=this,n=this._createImage(t);n.onload=function(){var t=r._getCanvas(n.naturalWidth,n.naturalHeight);t.getContext("2d").drawImage(n,0,0);var a=t.toDataURL();e(a)}},base64:function(t,e){var r=this._getSrc(t),n=r.src,a=r.type;if("file"===a)return this._readFile(n,e);if("video"===a){var i=t,o=this._getCanvas(i.videoWidth,i.videoHeight);o.getContext("2d").drawImage(i,0,0);e(o.toDataURL())}return this.init(n,e)},compress:function(t,e,r){var n=this,a=this._getSrc(t),i=a.src;if("file"===a.type)return this._readFile(i,function(a){n._compress(a,t,e,r)});this._compress(i,t,e,r)},_compress:function(t,e,r,n){var a=this;this._loadImage(t,function(t){var i=a._getImageType(e),o=a._getCanvas(t.naturalWidth,t.naturalHeight);o.getContext("2d").drawImage(t,0,0);var s=o.toDataURL(i,r/100);n(s)})},_readFile:function(t,e){var r=new FileReader;r.onload=function(t){var r=t.target.result;e(r)},r.readAsDataURL(t)},crop:function(t,e,r){var n=this,a=this._getSrc(t),i=a.src,o=a.type;if(console.log(t),"file"===o)return console.log(1111),this._readFile(i,function(a){n._crop(i,t,e,r)});this._crop(i,t,e,r)},_crop:function(t,e,r,n){var a=this;this._loadImage(t,function(t){if(i(r.x)&&i(r.y)&&r.w>0&&r.h>0){var o=r.w,s=r.h;r.maxWidth&&r.maxWidth<o&&(o=r.maxWidth,s=r.h*o/r.w),r.maxHeight&&r.maxHeight<s&&(s=r.maxHeight);var c=a._getCanvas(o,s),u=(c.getContext("2d").drawImage(t,r.x,r.y,r.w,r.h,0,0,o,s),a._getImageType(e)),g=c.toDataURL(u,r.compress/100);n(g)}})},resize:function(t,e,r){var n=this,a=this._getSrc(t),i=a.src;if("file"===a.type)return this._readFile(i,function(e){n._resize(i,t,options,r)});this._resize(i,t,options,r)},_resize:function(t,e,r,n){var a=this;this._loadImage(t,function(t){if(i(r.toCropImgX)&&i(r.toCropImgY)&&r.toCropImgW>0&&r.toCropImgH>0){var o=r.toCropImgW*r.imgChangeRatio,s=r.toCropImgH*r.imgChangeRatio,c=a._getCanvas(o,s),u=(c.getContext("2d").drawImage(t,0,0,r.toCropImgW,r.toCropImgH,0,0,o,s),a._getImageType(e)),g=c.toDataURL(u,r.compress/100);n(g)}})},rotate:function(t,e,r){var n=this,a=this._getSrc(t),i=a.src;return"file"===a.type?this._readFile(i,function(a){n._rotate(i,t,e,r)}):e%360==0?r(i):void this._rotate(i,t,e,r)},_rotate:function(t,e,r,n){var a=this;this._loadImage(t,function(t){var i=t.naturalWidth,o=t.naturalHeight;90!=(r%=360)&&270!=r||(i=t.naturalHeight,o=t.naturalWidth);var s=a._getCanvas(i,o),c=s.getContext("2d");c.clearRect(0,0,i,o),c.fillStyle="white",c.fillRect(0,0,i,o),c.translate(i/2,o/2),c.rotate(r*Math.PI/180),c.drawImage(t,-t.naturalWidth/2,-t.naturalHeight/2);var u=a._getImageType(e),g=s.toDataURL(u,1);n(g,i,o),s=null,c=null})},_loadImage:function(t,e){var r=this._createImage(t);r.onload=function(){e(r)}},_getCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},_createImage:function(t){var e=new Image;return e.src=t,e},_getSrc:function(t){var e=t,r="url";if(this._isImageElement(t)){var n=t.src;if(!n)return console.error("Element must hava src");e=n,r="element"}else this._isVideoElement(t)?(e=t,r="video"):this._isFileObject(t)&&(e=t,r="file");return{src:e,type:r}},_isFileObject:function(t){return"object"===(void 0===t?"undefined":n(t))&&t.type&&t.size>0},_isImageElement:function(t){return"object"===(void 0===t?"undefined":n(t))&&"IMG"===t.tagName},_isVideoElement:function(t){return"object"===(void 0===t?"undefined":n(t))&&"VIDEO"===t.tagName},_getImageType:function(t){var e=this._getSrc(t),r=e.src,n=e.type,a="image/jpeg";if("file"===n){var i=t.type,s=i.match(/(image\/[\w]+)\.*/)[0];void 0!==s&&(a=s)}else{var c=o.exec(r);c&&c[1]&&(a="image/"+c[1])}return a}}}]);