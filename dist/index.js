!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var a in o)("object"==typeof exports?exports:t)[a]=o[a]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(a){if(o[a])return o[a].exports;var r=o[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,a){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return"number"==typeof t};e.default={_getImageType:function(t){var e="image/jpeg",o=t.match(/(image\/[\w]+)\.*/)[0];return void 0!==o&&(e=o),e},compress:function(t,e,o){var a=new FileReader,r=this;a.onload=function(a){var n=new Image;n.src=a.target.result,n.onload=function(){var a=r._getImageType(t.type),i=r._getCanvas(n.naturalWidth,n.naturalHeight),u=i.toDataURL(a,e/100);o(u)}},a.readAsDataURL(t)},crop:function(t,e,o){if(a(e.toCropImgX)&&a(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var r=e.toCropImgW,n=e.toCropImgH;e.maxWidth&&e.maxWidth<r&&(r=e.maxWidth,n=e.toCropImgH*r/e.toCropImgW),e.maxHeight&&e.maxHeight<n&&(n=e.maxHeight);var i=this.__getCanvas(r,n),u=this._getImageType(t.src);o(i.toDataURL(u,e.compress/100))}},resize:function(t,e,o){if(a(e.toCropImgX)&&a(e.toCropImgY)&&e.toCropImgW>0&&e.toCropImgH>0){var r=e.toCropImgW*e.imgChangeRatio,n=e.toCropImgH*e.imgChangeRatio,i=this._getCanvas(r,n),u=this._getImageType(t.src);o(i.toDataURL(u,e.compress/100))}},rotate:function(t,e,o){var a=this;this._loadImage(t,function(r){var n=r.naturalWidth,i=r.naturalHeight,u=Math.max(n,i),g=a._getCanvas(u,u),s=g.getContext("2d");s.save(),s.translate(u/2,u/2),s.rotate(e*(Math.PI/180));var f=0,m=0;if(0===(e%=360))return o(t,n,i);if(e%180!=0){-90===e||270===e?f=u/2-n:m=u/2-i;var c=n;n=i,i=c}else f=u/2-n,m=u/2-i;s.drawImage(r,f,m),a._getCanvas(n,i).getContext("2d").drawImage(g,0,0,n,i,0,0,n,i);var p=a._getImageType(r.src),l=g.toDataURL(p,1);o(l,n,i),g=null,s=null})},_loadImage:function(t,e){var o=new Image;o.src=t,o.onload=function(){e(o)}},_getCanvas:function(t,e){var o=document.createElement("canvas");return o.width=t,o.height=e,o}}}])});